javascript:(function(){var xhr=new XMLHttpRequest();var url='http://localhost/stronki/translate/system/translate.php';var debug=1;process();function process(){if(xhr){try{var data=getData();if(!data)return;xhr.open('POST',url,true);xhr.onreadystatechange=handleRequestStateChange;xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');xhr.setRequestHeader('Content-length',data.length);xhr.setRequestHeader('Connection','close');xhr.send(data);}catch(e){displayError('Error while connecting to server. [process()] '+e.toString());}}};function handleRequestStateChange(){if(xhr.readyState==4&&xhr.status==200){try{handleServerResponse();}catch(e){displayError('Error while reading data [handleRequestStateChange()] '+e.toString());}}};function handleServerResponse(){if(xhr.responseText==='')return;alert(xhr.responseText);};function displayError(error){var msg='Wystąpił błąd. Spróbuj ponownie za 1 minutę. ';if(debug&&error!=undefined)msg+=error;alert(msg)};function getData(){var text=window.getSelection();var langFrom='en';var langTo='pl';if(text.length===0)return false;else return'text='+text+'&langFrom='+langFrom+'&langTo='+langTo;};})()